{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schemaHelpers.ts"],"sourcesContent":["import { timestamp, uuid } from \"drizzle-orm/pg-core\"\r\n\r\nexport const id = uuid().primaryKey().defaultRandom()\r\nexport const createdAt = timestamp({ withTimezone: true })\r\n  .notNull()\r\n  .defaultNow()\r\nexport const updatedAt = timestamp({ withTimezone: true })\r\n  .notNull()\r\n  .defaultNow()\r\n  .$onUpdate(() => new Date())\r\n"],"names":[],"mappings":";;;;;AAAA;AAAA;;AAEO,MAAM,KAAK,CAAA,GAAA,kKAAA,CAAA,OAAI,AAAD,IAAI,UAAU,GAAG,aAAa;AAC5C,MAAM,YAAY,CAAA,GAAA,uKAAA,CAAA,YAAS,AAAD,EAAE;IAAE,cAAc;AAAK,GACrD,OAAO,GACP,UAAU;AACN,MAAM,YAAY,CAAA,GAAA,uKAAA,CAAA,YAAS,AAAD,EAAE;IAAE,cAAc;AAAK,GACrD,OAAO,GACP,UAAU,GACV,SAAS,CAAC,IAAM,IAAI","debugId":null}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/userResume.ts"],"sourcesContent":["import { pgTable, varchar } from \"drizzle-orm/pg-core\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { UserTable } from \"./user\"\r\nimport { relations } from \"drizzle-orm\"\r\n\r\nexport const UserResumeTable = pgTable(\"user_resumes\", {\r\n  userId: varchar()\r\n    .primaryKey()\r\n    .references(() => UserTable.id),\r\n  resumeFileUrl: varchar().notNull(),\r\n  resumeFileKey: varchar().notNull(),\r\n  aiSummary: varchar(),\r\n  createdAt,\r\n  updatedAt,\r\n})\r\n\r\nexport const userResumeRelations = relations(UserResumeTable, ({ one }) => ({\r\n  user: one(UserTable, {\r\n    fields: [UserResumeTable.userId],\r\n    references: [UserTable.id],\r\n  }),\r\n}))\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;;;;;AAEO,MAAM,kBAAkB,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EAAE,gBAAgB;IACrD,QAAQ,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACX,UAAU,GACV,UAAU,CAAC,IAAM,mIAAA,CAAA,YAAS,CAAC,EAAE;IAChC,eAAe,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IAChC,eAAe,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IAChC,WAAW,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACjB,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX;AAEO,MAAM,sBAAsB,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EAAE,iBAAiB,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QAC1E,MAAM,IAAI,mIAAA,CAAA,YAAS,EAAE;YACnB,QAAQ;gBAAC,gBAAgB,MAAM;aAAC;YAChC,YAAY;gBAAC,mIAAA,CAAA,YAAS,CAAC,EAAE;aAAC;QAC5B;IACF,CAAC","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/userNotificationSettings.ts"],"sourcesContent":["import { boolean, pgTable, varchar } from \"drizzle-orm/pg-core\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { UserTable } from \"./user\"\r\nimport { relations } from \"drizzle-orm\"\r\n\r\nexport const UserNotificationSettingsTable = pgTable(\r\n  \"user_notification_settings\",\r\n  {\r\n    userId: varchar()\r\n      .primaryKey()\r\n      .references(() => UserTable.id),\r\n    newJobEmailNotifications: boolean().notNull().default(false),\r\n    aiPrompt: varchar(),\r\n    createdAt,\r\n    updatedAt,\r\n  }\r\n)\r\n\r\nexport const userNotificationSettingsRelations = relations(\r\n  UserNotificationSettingsTable,\r\n  ({ one }) => ({\r\n    user: one(UserTable, {\r\n      fields: [UserNotificationSettingsTable.userId],\r\n      references: [UserTable.id],\r\n    }),\r\n  })\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;AAEO,MAAM,gCAAgC,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EACjD,8BACA;IACE,QAAQ,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACX,UAAU,GACV,UAAU,CAAC,IAAM,mIAAA,CAAA,YAAS,CAAC,EAAE;IAChC,0BAA0B,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO,GAAG,OAAO,CAAC;IACtD,UAAU,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IAChB,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX;AAGK,MAAM,oCAAoC,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EACvD,+BACA,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACZ,MAAM,IAAI,mIAAA,CAAA,YAAS,EAAE;YACnB,QAAQ;gBAAC,8BAA8B,MAAM;aAAC;YAC9C,YAAY;gBAAC,mIAAA,CAAA,YAAS,CAAC,EAAE;aAAC;QAC5B;IACF,CAAC","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/jobListingApplication.ts"],"sourcesContent":["import {\r\n  integer,\r\n  pgEnum,\r\n  pgTable,\r\n  primaryKey,\r\n  text,\r\n  uuid,\r\n  varchar,\r\n} from \"drizzle-orm/pg-core\"\r\nimport { JobListingTable } from \"./jobListing\"\r\nimport { UserTable } from \"./user\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { relations } from \"drizzle-orm\"\r\n\r\nexport const applicationStages = [\r\n  \"denied\",\r\n  \"applied\",\r\n  \"interested\",\r\n  \"interviewed\",\r\n  \"hired\",\r\n] as const\r\nexport type ApplicationStage = (typeof applicationStages)[number]\r\nexport const applicationStageEnum = pgEnum(\r\n  \"job_listing_applications_stage\",\r\n  applicationStages\r\n)\r\n\r\nexport const JobListingApplicationTable = pgTable(\r\n  \"job_listing_applications\",\r\n  {\r\n    jobListingId: uuid()\r\n      .references(() => JobListingTable.id, { onDelete: \"cascade\" })\r\n      .notNull(),\r\n    userId: varchar()\r\n      .references(() => UserTable.id, { onDelete: \"cascade\" })\r\n      .notNull(),\r\n    coverLetter: text(),\r\n    rating: integer(),\r\n    stage: applicationStageEnum().notNull().default(\"applied\"),\r\n    createdAt,\r\n    updatedAt,\r\n  },\r\n  table => [primaryKey({ columns: [table.jobListingId, table.userId] })]\r\n)\r\n\r\nexport const jobListingApplicationRelations = relations(\r\n  JobListingApplicationTable,\r\n  ({ one }) => ({\r\n    jobListing: one(JobListingTable, {\r\n      fields: [JobListingApplicationTable.jobListingId],\r\n      references: [JobListingTable.id],\r\n    }),\r\n    user: one(UserTable, {\r\n      fields: [JobListingApplicationTable.userId],\r\n      references: [UserTable.id],\r\n    }),\r\n  })\r\n)\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;;;;;;AAEO,MAAM,oBAAoB;IAC/B;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,uBAAuB,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EACvC,kCACA;AAGK,MAAM,6BAA6B,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EAC9C,4BACA;IACE,cAAc,CAAA,GAAA,kKAAA,CAAA,OAAI,AAAD,IACd,UAAU,CAAC,IAAM,yIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU,GAC3D,OAAO;IACV,QAAQ,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACX,UAAU,CAAC,IAAM,mIAAA,CAAA,YAAS,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU,GACrD,OAAO;IACV,aAAa,CAAA,GAAA,kKAAA,CAAA,OAAI,AAAD;IAChB,QAAQ,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACd,OAAO,uBAAuB,OAAO,GAAG,OAAO,CAAC;IAChD,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX,GACA,CAAA,QAAS;QAAC,CAAA,GAAA,kKAAA,CAAA,aAAU,AAAD,EAAE;YAAE,SAAS;gBAAC,MAAM,YAAY;gBAAE,MAAM,MAAM;aAAC;QAAC;KAAG;AAGjE,MAAM,iCAAiC,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EACpD,4BACA,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACZ,YAAY,IAAI,yIAAA,CAAA,kBAAe,EAAE;YAC/B,QAAQ;gBAAC,2BAA2B,YAAY;aAAC;YACjD,YAAY;gBAAC,yIAAA,CAAA,kBAAe,CAAC,EAAE;aAAC;QAClC;QACA,MAAM,IAAI,mIAAA,CAAA,YAAS,EAAE;YACnB,QAAQ;gBAAC,2BAA2B,MAAM;aAAC;YAC3C,YAAY;gBAAC,mIAAA,CAAA,YAAS,CAAC,EAAE;aAAC;QAC5B;IACF,CAAC","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/jobListing.ts"],"sourcesContent":["import {\r\n  integer,\r\n  pgEnum,\r\n  pgTable,\r\n  text,\r\n  varchar,\r\n  boolean,\r\n  timestamp,\r\n  index,\r\n} from \"drizzle-orm/pg-core\"\r\nimport { createdAt, id, updatedAt } from \"../schemaHelpers\"\r\nimport { OrganizationTable } from \"./organization\"\r\nimport { relations } from \"drizzle-orm\"\r\nimport { JobListingApplicationTable } from \"./jobListingApplication\"\r\n\r\nexport const wageIntervals = [\"hourly\", \"yearly\"] as const\r\nexport type WageInterval = (typeof wageIntervals)[number]\r\nexport const wageIntervalEnum = pgEnum(\r\n  \"job_listings_wage_interval\",\r\n  wageIntervals\r\n)\r\n\r\nexport const locationRequirements = [\"in-office\", \"hybrid\", \"remote\"] as const\r\nexport type LocationRequirement = (typeof locationRequirements)[number]\r\nexport const locationRequirementEnum = pgEnum(\r\n  \"job_listings_location_requirement\",\r\n  locationRequirements\r\n)\r\n\r\nexport const experienceLevels = [\"junior\", \"mid-level\", \"senior\"] as const\r\nexport type ExperienceLevel = (typeof experienceLevels)[number]\r\nexport const experienceLevelEnum = pgEnum(\r\n  \"job_listings_experience_level\",\r\n  experienceLevels\r\n)\r\n\r\nexport const jobListingStatuses = [\"draft\", \"published\", \"delisted\"] as const\r\nexport type JobListingStatus = (typeof jobListingStatuses)[number]\r\nexport const jobListingStatusEnum = pgEnum(\r\n  \"job_listings_status\",\r\n  jobListingStatuses\r\n)\r\n\r\nexport const jobListingTypes = [\"internship\", \"part-time\", \"full-time\"] as const\r\nexport type JobListingType = (typeof jobListingTypes)[number]\r\nexport const jobListingTypeEnum = pgEnum(\"job_listings_type\", jobListingTypes)\r\n\r\nexport const JobListingTable = pgTable(\r\n  \"job_listings\",\r\n  {\r\n    id,\r\n    organizationId: varchar()\r\n      .references(() => OrganizationTable.id, { onDelete: \"cascade\" })\r\n      .notNull(),\r\n    title: varchar().notNull(),\r\n    description: text().notNull(),\r\n    wage: integer(),\r\n    wageInterval: wageIntervalEnum(),\r\n    stateAbbreviation: varchar(),\r\n    city: varchar(),\r\n    isFeatured: boolean().notNull().default(false),\r\n    locationRequirement: locationRequirementEnum().notNull(),\r\n    experienceLevel: experienceLevelEnum().notNull(),\r\n    status: jobListingStatusEnum().notNull().default(\"draft\"),\r\n    type: jobListingTypeEnum().notNull(),\r\n    postedAt: timestamp({ withTimezone: true }),\r\n    createdAt,\r\n    updatedAt,\r\n  },\r\n  table => [index().on(table.stateAbbreviation)]\r\n)\r\n\r\nexport const jobListingReferences = relations(\r\n  JobListingTable,\r\n  ({ one, many }) => ({\r\n    organization: one(OrganizationTable, {\r\n      fields: [JobListingTable.organizationId],\r\n      references: [OrganizationTable.id],\r\n    }),\r\n    applications: many(JobListingApplicationTable),\r\n  })\r\n)\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;;;;;;AAEO,MAAM,gBAAgB;IAAC;IAAU;CAAS;AAE1C,MAAM,mBAAmB,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EACnC,8BACA;AAGK,MAAM,uBAAuB;IAAC;IAAa;IAAU;CAAS;AAE9D,MAAM,0BAA0B,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EAC1C,qCACA;AAGK,MAAM,mBAAmB;IAAC;IAAU;IAAa;CAAS;AAE1D,MAAM,sBAAsB,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EACtC,iCACA;AAGK,MAAM,qBAAqB;IAAC;IAAS;IAAa;CAAW;AAE7D,MAAM,uBAAuB,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EACvC,uBACA;AAGK,MAAM,kBAAkB;IAAC;IAAc;IAAa;CAAY;AAEhE,MAAM,qBAAqB,CAAA,GAAA,kKAAA,CAAA,SAAM,AAAD,EAAE,qBAAqB;AAEvD,MAAM,kBAAkB,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EACnC,gBACA;IACE,IAAA,kIAAA,CAAA,KAAE;IACF,gBAAgB,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACnB,UAAU,CAAC,IAAM,2IAAA,CAAA,oBAAiB,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU,GAC7D,OAAO;IACV,OAAO,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IACxB,aAAa,CAAA,GAAA,kKAAA,CAAA,OAAI,AAAD,IAAI,OAAO;IAC3B,MAAM,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACZ,cAAc;IACd,mBAAmB,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACzB,MAAM,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACZ,YAAY,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO,GAAG,OAAO,CAAC;IACxC,qBAAqB,0BAA0B,OAAO;IACtD,iBAAiB,sBAAsB,OAAO;IAC9C,QAAQ,uBAAuB,OAAO,GAAG,OAAO,CAAC;IACjD,MAAM,qBAAqB,OAAO;IAClC,UAAU,CAAA,GAAA,uKAAA,CAAA,YAAS,AAAD,EAAE;QAAE,cAAc;IAAK;IACzC,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX,GACA,CAAA,QAAS;QAAC,CAAA,GAAA,0JAAA,CAAA,QAAK,AAAD,IAAI,EAAE,CAAC,MAAM,iBAAiB;KAAE;AAGzC,MAAM,uBAAuB,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EAC1C,iBACA,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAK,CAAC;QAClB,cAAc,IAAI,2IAAA,CAAA,oBAAiB,EAAE;YACnC,QAAQ;gBAAC,gBAAgB,cAAc;aAAC;YACxC,YAAY;gBAAC,2IAAA,CAAA,oBAAiB,CAAC,EAAE;aAAC;QACpC;QACA,cAAc,KAAK,oJAAA,CAAA,6BAA0B;IAC/C,CAAC","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/organization.ts"],"sourcesContent":["import { pgTable, varchar } from \"drizzle-orm/pg-core\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { relations } from \"drizzle-orm\"\r\nimport { JobListingTable } from \"./jobListing\"\r\nimport { OrganizationUserSettingsTable } from \"./organizationUserSettings\"\r\n\r\nexport const OrganizationTable = pgTable(\"organizations\", {\r\n  id: varchar().primaryKey(),\r\n  name: varchar().notNull(),\r\n  imageUrl: varchar(),\r\n  createdAt,\r\n  updatedAt,\r\n})\r\n\r\nexport const organizationRelations = relations(\r\n  OrganizationTable,\r\n  ({ many }) => ({\r\n    jobListings: many(JobListingTable),\r\n    organizationUserSettings: many(OrganizationUserSettingsTable),\r\n  })\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,oBAAoB,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EAAE,iBAAiB;IACxD,IAAI,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,UAAU;IACxB,MAAM,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IACvB,UAAU,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IAChB,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX;AAEO,MAAM,wBAAwB,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EAC3C,mBACA,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QACb,aAAa,KAAK,yIAAA,CAAA,kBAAe;QACjC,0BAA0B,KAAK,uJAAA,CAAA,gCAA6B;IAC9D,CAAC","debugId":null}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/organizationUserSettings.ts"],"sourcesContent":["import {\r\n  boolean,\r\n  integer,\r\n  pgTable,\r\n  primaryKey,\r\n  varchar,\r\n} from \"drizzle-orm/pg-core\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { UserTable } from \"./user\"\r\nimport { OrganizationTable } from \"./organization\"\r\nimport { relations } from \"drizzle-orm\"\r\n\r\nexport const OrganizationUserSettingsTable = pgTable(\r\n  \"organization_user_settings\",\r\n  {\r\n    userId: varchar()\r\n      .notNull()\r\n      .references(() => UserTable.id),\r\n    organizationId: varchar()\r\n      .notNull()\r\n      .references(() => OrganizationTable.id),\r\n    newApplicationEmailNotifications: boolean().notNull().default(false),\r\n    minimumRating: integer(),\r\n    createdAt,\r\n    updatedAt,\r\n  },\r\n  table => [primaryKey({ columns: [table.userId, table.organizationId] })]\r\n)\r\n\r\nexport const organizationUserSettingsRelations = relations(\r\n  OrganizationUserSettingsTable,\r\n  ({ one }) => ({\r\n    user: one(UserTable, {\r\n      fields: [OrganizationUserSettingsTable.userId],\r\n      references: [UserTable.id],\r\n    }),\r\n    organization: one(OrganizationTable, {\r\n      fields: [OrganizationUserSettingsTable.userId],\r\n      references: [OrganizationTable.id],\r\n    }),\r\n  })\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;;;;;;AAEO,MAAM,gCAAgC,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EACjD,8BACA;IACE,QAAQ,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACX,OAAO,GACP,UAAU,CAAC,IAAM,mIAAA,CAAA,YAAS,CAAC,EAAE;IAChC,gBAAgB,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IACnB,OAAO,GACP,UAAU,CAAC,IAAM,2IAAA,CAAA,oBAAiB,CAAC,EAAE;IACxC,kCAAkC,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO,GAAG,OAAO,CAAC;IAC9D,eAAe,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD;IACrB,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX,GACA,CAAA,QAAS;QAAC,CAAA,GAAA,kKAAA,CAAA,aAAU,AAAD,EAAE;YAAE,SAAS;gBAAC,MAAM,MAAM;gBAAE,MAAM,cAAc;aAAC;QAAC;KAAG;AAGnE,MAAM,oCAAoC,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EACvD,+BACA,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACZ,MAAM,IAAI,mIAAA,CAAA,YAAS,EAAE;YACnB,QAAQ;gBAAC,8BAA8B,MAAM;aAAC;YAC9C,YAAY;gBAAC,mIAAA,CAAA,YAAS,CAAC,EAAE;aAAC;QAC5B;QACA,cAAc,IAAI,2IAAA,CAAA,oBAAiB,EAAE;YACnC,QAAQ;gBAAC,8BAA8B,MAAM;aAAC;YAC9C,YAAY;gBAAC,2IAAA,CAAA,oBAAiB,CAAC,EAAE;aAAC;QACpC;IACF,CAAC","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema/user.ts"],"sourcesContent":["import { pgTable, varchar } from \"drizzle-orm/pg-core\"\r\nimport { createdAt, updatedAt } from \"../schemaHelpers\"\r\nimport { relations } from \"drizzle-orm\"\r\nimport { UserResumeTable } from \"./userResume\"\r\nimport { UserNotificationSettingsTable } from \"./userNotificationSettings\"\r\nimport { OrganizationUserSettingsTable } from \"./organizationUserSettings\"\r\n\r\nexport const UserTable = pgTable(\"users\", {\r\n  id: varchar().primaryKey(),\r\n  name: varchar().notNull(),\r\n  imageUrl: varchar().notNull(),\r\n  email: varchar().notNull().unique(),\r\n  createdAt,\r\n  updatedAt,\r\n})\r\n\r\nexport const userRelations = relations(UserTable, ({ one, many }) => ({\r\n  notificationSettings: one(UserNotificationSettingsTable),\r\n  resume: one(UserResumeTable),\r\n  organizationUserSettings: many(OrganizationUserSettingsTable),\r\n}))\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,YAAY,CAAA,GAAA,wJAAA,CAAA,UAAO,AAAD,EAAE,SAAS;IACxC,IAAI,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,UAAU;IACxB,MAAM,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IACvB,UAAU,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO;IAC3B,OAAO,CAAA,GAAA,qKAAA,CAAA,UAAO,AAAD,IAAI,OAAO,GAAG,MAAM;IACjC,WAAA,kIAAA,CAAA,YAAS;IACT,WAAA,kIAAA,CAAA,YAAS;AACX;AAEO,MAAM,gBAAgB,CAAA,GAAA,8IAAA,CAAA,YAAS,AAAD,EAAE,WAAW,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAK,CAAC;QACpE,sBAAsB,IAAI,uJAAA,CAAA,gCAA6B;QACvD,QAAQ,IAAI,yIAAA,CAAA,kBAAe;QAC3B,0BAA0B,KAAK,uJAAA,CAAA,gCAA6B;IAC9D,CAAC","debugId":null}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/schema.ts"],"sourcesContent":["export * from \"@/drizzle/schema/user\"\r\nexport * from \"./schema/organization\"\r\nexport * from \"./schema/jobListing\"\r\nexport * from \"./schema/userResume\"\r\nexport * from \"./schema/userNotificationSettings\"\r\nexport * from \"./schema/jobListingApplication\"\r\nexport * from \"./schema/organizationUserSettings\"\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/actions/schemas.ts"],"sourcesContent":["import {\r\n  experienceLevels,\r\n  jobListingTypes,\r\n  locationRequirements,\r\n  wageIntervals,\r\n} from \"@/drizzle/schema\"\r\nimport { z } from \"zod\"\r\n\r\nexport const jobListingSchema = z\r\n  .object({\r\n    title: z.string().min(1, \"Required\"),\r\n    description: z.string().min(1, \"Required\"),\r\n    experienceLevel: z.enum(experienceLevels),\r\n    locationRequirement: z.enum(locationRequirements),\r\n    type: z.enum(jobListingTypes),\r\n    wage: z.number().int().positive().min(1).nullable(),\r\n    wageInterval: z.enum(wageIntervals).nullable(),\r\n    stateAbbreviation: z\r\n      .string()\r\n      .transform(val => (val.trim() === \"\" ? null : val))\r\n      .nullable(),\r\n    city: z\r\n      .string()\r\n      .transform(val => (val.trim() === \"\" ? null : val))\r\n      .nullable(),\r\n  })\r\n  .refine(\r\n    listing => {\r\n      return listing.locationRequirement === \"remote\" || listing.city != null\r\n    },\r\n    {\r\n      message: \"Required for non-remote listings\",\r\n      path: [\"city\"],\r\n    }\r\n  )\r\n  .refine(\r\n    listing => {\r\n      return (\r\n        listing.locationRequirement === \"remote\" ||\r\n        listing.stateAbbreviation != null\r\n      )\r\n    },\r\n    {\r\n      message: \"Required for non-remote listings\",\r\n      path: [\"stateAbbreviation\"],\r\n    }\r\n  )\r\n\r\nexport const jobListingAiSearchSchema = z.object({\r\n  query: z.string().min(1, \"Required\"),\r\n})\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAMA;AAAA;;;AAEO,MAAM,mBAAmB,oLAAA,CAAA,IAAC,CAC9B,MAAM,CAAC;IACN,OAAO,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,aAAa,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC/B,iBAAiB,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,mBAAgB;IACxC,qBAAqB,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,uBAAoB;IAChD,MAAM,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,kBAAe;IAC5B,MAAM,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,GAAG,CAAC,GAAG,QAAQ;IACjD,cAAc,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,gBAAa,EAAE,QAAQ;IAC5C,mBAAmB,oLAAA,CAAA,IAAC,CACjB,MAAM,GACN,SAAS,CAAC,CAAA,MAAQ,IAAI,IAAI,OAAO,KAAK,OAAO,KAC7C,QAAQ;IACX,MAAM,oLAAA,CAAA,IAAC,CACJ,MAAM,GACN,SAAS,CAAC,CAAA,MAAQ,IAAI,IAAI,OAAO,KAAK,OAAO,KAC7C,QAAQ;AACb,GACC,MAAM,CACL,CAAA;IACE,OAAO,QAAQ,mBAAmB,KAAK,YAAY,QAAQ,IAAI,IAAI;AACrE,GACA;IACE,SAAS;IACT,MAAM;QAAC;KAAO;AAChB,GAED,MAAM,CACL,CAAA;IACE,OACE,QAAQ,mBAAmB,KAAK,YAChC,QAAQ,iBAAiB,IAAI;AAEjC,GACA;IACE,SAAS;IACT,MAAM;QAAC;KAAoB;AAC7B;AAGG,MAAM,2BAA2B,oLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/C,OAAO,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC3B","debugId":null}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Label({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  return (\r\n    <LabelPrimitive.Root\r\n      data-slot=\"label\"\r\n      className={cn(\r\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6MAAC,oKAAA,CAAA,OAAmB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  useFormState,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState } = useFormContext()\r\n  const formState = useFormState({ name: fieldContext.name })\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div\r\n        data-slot=\"form-item\"\r\n        className={cn(\"grid gap-2\", className)}\r\n        {...props}\r\n      />\r\n    </FormItemContext.Provider>\r\n  )\r\n}\r\n\r\nfunction FormLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      data-slot=\"form-label\"\r\n      data-error={!!error}\r\n      className={cn(\"data-[error=true]:text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormControl({ ...props }: React.ComponentProps<typeof Slot>) {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      data-slot=\"form-control\"\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-description\"\r\n      id={formDescriptionId}\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : props.children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-message\"\r\n      id={formMessageId}\r\n      className={cn(\"text-destructive text-sm\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n}\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\r\n  return (\r\n    <textarea\r\n      data-slot=\"textarea\"\r\n      className={cn(\r\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6MAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/components/LoadingSwap.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\r\nimport { Loader2Icon } from \"lucide-react\"\r\nimport { ReactNode } from \"react\"\r\n\r\nexport function LoadingSwap({\r\n  isLoading,\r\n  children,\r\n  className,\r\n}: {\r\n  isLoading: boolean\r\n  children: ReactNode\r\n  className?: string\r\n}) {\r\n  return (\r\n    <div className=\"grid items-center justify-items-center\">\r\n      <div\r\n        className={cn(\r\n          \"col-start-1 col-end-1 row-start-1 row-end-1\",\r\n          isLoading ? \"invisible\" : \"visible\",\r\n          className\r\n        )}\r\n      >\r\n        {children}\r\n      </div>\r\n      <div\r\n        className={cn(\r\n          \"col-start-1 col-end-1 row-start-1 row-end-1\",\r\n          isLoading ? \"visible\" : \"invisible\",\r\n          className\r\n        )}\r\n      >\r\n        <Loader2Icon className=\"animate-spin\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAGO,SAAS,YAAY,EAC1B,SAAS,EACT,QAAQ,EACR,SAAS,EAKV;IACC,qBACE,6MAAC;QAAI,WAAU;;0BACb,6MAAC;gBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+CACA,YAAY,cAAc,WAC1B;0BAGD;;;;;;0BAEH,6MAAC;gBACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+CACA,YAAY,YAAY,aACxB;0BAGF,cAAA,6MAAC,wNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/B;KA/BgB","debugId":null}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/data/env/server.ts"],"sourcesContent":["import { createEnv } from \"@t3-oss/env-nextjs\"\r\nimport { z } from \"zod\"\r\n\r\nexport const env = createEnv({\r\n  server: {\r\n    DB_PASSWORD: z.string().min(1),\r\n    DB_USER: z.string().min(1),\r\n    DB_HOST: z.string().min(1),\r\n    DB_PORT: z.string().min(1),\r\n    DB_NAME: z.string().min(1),\r\n    CLERK_SECRET_KEY: z.string().min(1),\r\n    CLERK_WEBHOOK_SECRET: z.string().min(1),\r\n    UPLOADTHING_TOKEN: z.string().min(1),\r\n    ANTHROPIC_API_KEY: z.string().min(1),\r\n    GEMINI_API_KEY: z.string().min(1),\r\n    RESEND_API_KEY: z.string().min(1),\r\n    SERVER_URL: z.string().optional(),\r\n  },\r\n  createFinalSchema: env => {\r\n    return z.object(env).transform(val => {\r\n      const { DB_HOST, DB_NAME, DB_PASSWORD, DB_PORT, DB_USER, ...rest } = val\r\n\r\n      return {\r\n        ...rest,\r\n        DATABASE_URL: `postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}`,\r\n      }\r\n    })\r\n  },\r\n  emptyStringAsUndefined: true,\r\n  experimental__runtimeEnv: process.env,\r\n})\r\n"],"names":[],"mappings":";;;AA6B4B;AA7B5B;AACA;AAAA;;;AAEO,MAAM,MAAM,CAAA,GAAA,gKAAA,CAAA,YAAS,AAAD,EAAE;IAC3B,QAAQ;QACN,aAAa,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC5B,SAAS,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,SAAS,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,SAAS,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,SAAS,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,kBAAkB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACjC,sBAAsB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QACrC,mBAAmB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAClC,mBAAmB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAClC,gBAAgB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC/B,gBAAgB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;QAC/B,YAAY,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACjC;IACA,mBAAmB,CAAA;QACjB,OAAO,oLAAA,CAAA,IAAC,CAAC,MAAM,CAAC,KAAK,SAAS,CAAC,CAAA;YAC7B,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,GAAG;YAErE,OAAO;gBACL,GAAG,IAAI;gBACP,cAAc,CAAC,WAAW,EAAE,QAAQ,CAAC,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,EAAE,QAAQ,CAAC,EAAE,SAAS;YACvF;QACF;IACF;IACA,wBAAwB;IACxB,0BAA0B,gKAAA,CAAA,UAAO,CAAC,GAAG;AACvC","debugId":null}},
    {"offset": {"line": 950, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/drizzle/db.ts"],"sourcesContent":["import { env } from \"@/data/env/server\"\r\nimport { drizzle } from \"drizzle-orm/node-postgres\"\r\nimport * as schema from \"@/drizzle/schema\"\r\n\r\nexport const db = drizzle(env.DATABASE_URL, { schema })\r\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AAAA;;;;AAEO,MAAM,KAAK,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD,EAAE,+HAAA,CAAA,MAAG,CAAC,YAAY,EAAE;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 972, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/lib/dataCache.ts"],"sourcesContent":["type CacheTag =\r\n  | \"users\"\r\n  | \"organizations\"\r\n  | \"jobListings\"\r\n  | \"userNotificationSettings\"\r\n  | \"userResumes\"\r\n  | \"jobListingApplications\"\r\n  | \"organizationUserSettings\"\r\n\r\nexport function getGlobalTag(tag: CacheTag) {\r\n  return `global:${tag}` as const\r\n}\r\n\r\nexport function getJobListingTag(tag: CacheTag, jobListingId: string) {\r\n  return `jobListing:${jobListingId}-${tag}` as const\r\n}\r\n\r\nexport function getOrganizationTag(tag: CacheTag, organizationId: string) {\r\n  return `organization:${organizationId}-${tag}` as const\r\n}\r\n\r\nexport function getIdTag(tag: CacheTag, id: string) {\r\n  return `id:${id}-${tag}` as const\r\n}\r\n"],"names":[],"mappings":";;;;;;AASO,SAAS,aAAa,GAAa;IACxC,OAAO,CAAC,OAAO,EAAE,KAAK;AACxB;AAEO,SAAS,iBAAiB,GAAa,EAAE,YAAoB;IAClE,OAAO,CAAC,WAAW,EAAE,aAAa,CAAC,EAAE,KAAK;AAC5C;AAEO,SAAS,mBAAmB,GAAa,EAAE,cAAsB;IACtE,OAAO,CAAC,aAAa,EAAE,eAAe,CAAC,EAAE,KAAK;AAChD;AAEO,SAAS,SAAS,GAAa,EAAE,EAAU;IAChD,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,KAAK;AAC1B","debugId":null}},
    {"offset": {"line": 999, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/organizations/db/cache/organizations.ts"],"sourcesContent":["import { getGlobalTag, getIdTag } from \"@/lib/dataCache\"\r\nimport { revalidateTag } from \"next/cache\"\r\n\r\nexport function getOrganizationGlobalTag() {\r\n  return getGlobalTag(\"organizations\")\r\n}\r\n\r\nexport function getOrganizationIdTag(id: string) {\r\n  return getIdTag(\"organizations\", id)\r\n}\r\n\r\nexport function revalidateOrganizationCache(id: string) {\r\n  revalidateTag(getOrganizationGlobalTag())\r\n  revalidateTag(getOrganizationIdTag(id))\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,CAAA,GAAA,0HAAA,CAAA,eAAY,AAAD,EAAE;AACtB;AAEO,SAAS,qBAAqB,EAAU;IAC7C,OAAO,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE,iBAAiB;AACnC;AAEO,SAAS,4BAA4B,EAAU;IACpD,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE;IACd,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE,qBAAqB;AACrC","debugId":null}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/users/db/cache/users.ts"],"sourcesContent":["import { getGlobalTag, getIdTag } from \"@/lib/dataCache\"\r\nimport { revalidateTag } from \"next/cache\"\r\n\r\nexport function getUserGlobalTag() {\r\n  return getGlobalTag(\"users\")\r\n}\r\n\r\nexport function getUserIdTag(id: string) {\r\n  return getIdTag(\"users\", id)\r\n}\r\n\r\nexport function revalidateUserCache(id: string) {\r\n  revalidateTag(getUserGlobalTag())\r\n  revalidateTag(getUserIdTag(id))\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,CAAA,GAAA,0HAAA,CAAA,eAAY,AAAD,EAAE;AACtB;AAEO,SAAS,aAAa,EAAU;IACrC,OAAO,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE,SAAS;AAC3B;AAEO,SAAS,oBAAoB,EAAU;IAC5C,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE;IACd,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE,aAAa;AAC7B","debugId":null}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/clerk/lib/getCurrentAuth.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\r\nimport { OrganizationTable, UserTable } from \"@/drizzle/schema\"\r\nimport { getOrganizationIdTag } from \"@/features/organizations/db/cache/organizations\"\r\nimport { getUserIdTag } from \"@/features/users/db/cache/users\"\r\nimport { auth } from \"@clerk/nextjs/server\"\r\nimport { eq } from \"drizzle-orm\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\n\r\nexport async function getCurrentUser({ allData = false } = {}) {\r\n  const { userId } = await auth()\r\n  return {\r\n    userId,\r\n    user: allData && userId != null ? await getUser(userId) : undefined,\r\n  }\r\n}\r\n\r\nexport async function getCurrentOrganization({ allData = false } = {}) {\r\n  const { orgId } = await auth()\r\n\r\n  return {\r\n    orgId,\r\n    organization:\r\n      allData && orgId != null ? await getOrganization(orgId) : undefined,\r\n  }\r\n}\r\n\r\nasync function getUser(id: string) {\r\n  \"use cache\"\r\n  cacheTag(getUserIdTag(id))\r\n\r\n  return db.query.UserTable.findFirst({\r\n    where: eq(UserTable.id, id),\r\n  })\r\n}\r\n\r\nasync function getOrganization(id: string) {\r\n  \"use cache\"\r\n  cacheTag(getOrganizationIdTag(id))\r\n\r\n  return db.query.OrganizationTable.findFirst({\r\n    where: eq(OrganizationTable.id, id),\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEO,eAAe,eAAe,EAAE,UAAU,KAAK,EAAE,GAAG,CAAC,CAAC;IAC3D,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD;IAC5B,OAAO;QACL;QACA,MAAM,WAAW,UAAU,OAAO,MAAM,QAAQ,UAAU;IAC5D;AACF;AAEO,eAAe,uBAAuB,EAAE,UAAU,KAAK,EAAE,GAAG,CAAC,CAAC;IACnE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD;IAE3B,OAAO;QACL;QACA,cACE,WAAW,SAAS,OAAO,MAAM,gBAAgB,SAAS;IAC9D;AACF;AAEA,eAAe,QAAQ,EAAU;IAC/B;IACA,CAAA,GAAA,yKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,mJAAA,CAAA,eAAY,AAAD,EAAE;IAEtB,OAAO,uHAAA,CAAA,KAAE,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC;QAClC,OAAO,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,mIAAA,CAAA,YAAS,CAAC,EAAE,EAAE;IAC1B;AACF;AAEA,eAAe,gBAAgB,EAAU;IACvC;IACA,CAAA,GAAA,yKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,mKAAA,CAAA,uBAAoB,AAAD,EAAE;IAE9B,OAAO,uHAAA,CAAA,KAAE,CAAC,KAAK,CAAC,iBAAiB,CAAC,SAAS,CAAC;QAC1C,OAAO,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,2IAAA,CAAA,oBAAiB,CAAC,EAAE,EAAE;IAClC;AACF","debugId":null}},
    {"offset": {"line": 1112, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/db/cache/jobListings.ts"],"sourcesContent":["import { getGlobalTag, getIdTag, getOrganizationTag } from \"@/lib/dataCache\"\r\nimport { revalidateTag } from \"next/cache\"\r\n\r\nexport function getJobListingGlobalTag() {\r\n  return getGlobalTag(\"jobListings\")\r\n}\r\n\r\nexport function getJobListingOrganizationTag(organizationId: string) {\r\n  return getOrganizationTag(\"jobListings\", organizationId)\r\n}\r\n\r\nexport function getJobListingIdTag(id: string) {\r\n  return getIdTag(\"jobListings\", id)\r\n}\r\n\r\nexport function revalidateJobListingCache({\r\n  id,\r\n  organizationId,\r\n}: {\r\n  id: string\r\n  organizationId: string\r\n}) {\r\n  revalidateTag(getJobListingGlobalTag())\r\n  revalidateTag(getJobListingOrganizationTag(organizationId))\r\n  revalidateTag(getJobListingIdTag(id))\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS;IACd,OAAO,CAAA,GAAA,0HAAA,CAAA,eAAY,AAAD,EAAE;AACtB;AAEO,SAAS,6BAA6B,cAAsB;IACjE,OAAO,CAAA,GAAA,0HAAA,CAAA,qBAAkB,AAAD,EAAE,eAAe;AAC3C;AAEO,SAAS,mBAAmB,EAAU;IAC3C,OAAO,CAAA,GAAA,0HAAA,CAAA,WAAQ,AAAD,EAAE,eAAe;AACjC;AAEO,SAAS,0BAA0B,EACxC,EAAE,EACF,cAAc,EAIf;IACC,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE;IACd,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE,6BAA6B;IAC3C,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE,mBAAmB;AACnC","debugId":null}},
    {"offset": {"line": 1145, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/db/jobListings.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport { revalidateJobListingCache } from \"./cache/jobListings\"\r\nimport { eq } from \"drizzle-orm\"\r\n\r\nexport async function insertJobListing(\r\n  jobListing: typeof JobListingTable.$inferInsert\r\n) {\r\n  const [newListing] = await db\r\n    .insert(JobListingTable)\r\n    .values(jobListing)\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(newListing)\r\n\r\n  return newListing\r\n}\r\n\r\nexport async function updateJobListing(\r\n  id: string,\r\n  jobListing: Partial<typeof JobListingTable.$inferInsert>\r\n) {\r\n  const [updatedListing] = await db\r\n    .update(JobListingTable)\r\n    .set(jobListing)\r\n    .where(eq(JobListingTable.id, id))\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(updatedListing)\r\n\r\n  return updatedListing\r\n}\r\n\r\nexport async function deleteJobListing(id: string) {\r\n  const [deletedJobListing] = await db\r\n    .delete(JobListingTable)\r\n    .where(eq(JobListingTable.id, id))\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(deletedJobListing)\r\n\r\n  return deletedJobListing\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEO,eAAe,iBACpB,UAA+C;IAE/C,MAAM,CAAC,WAAW,GAAG,MAAM,uHAAA,CAAA,KAAE,CAC1B,MAAM,CAAC,yIAAA,CAAA,kBAAe,EACtB,MAAM,CAAC,YACP,SAAS,CAAC;QACT,IAAI,yIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,yIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,+JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT;AAEO,eAAe,iBACpB,EAAU,EACV,UAAwD;IAExD,MAAM,CAAC,eAAe,GAAG,MAAM,uHAAA,CAAA,KAAE,CAC9B,MAAM,CAAC,yIAAA,CAAA,kBAAe,EACtB,GAAG,CAAC,YACJ,KAAK,CAAC,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE,KAC7B,SAAS,CAAC;QACT,IAAI,yIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,yIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,+JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT;AAEO,eAAe,iBAAiB,EAAU;IAC/C,MAAM,CAAC,kBAAkB,GAAG,MAAM,uHAAA,CAAA,KAAE,CACjC,MAAM,CAAC,yIAAA,CAAA,kBAAe,EACtB,KAAK,CAAC,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE,KAC7B,SAAS,CAAC;QACT,IAAI,yIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,yIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,+JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/clerk/lib/orgUserPermissions.ts"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\"\r\n\r\ntype UserPermission =\r\n  | \"org:job_listings:create\"\r\n  | \"org:job_listings:update\"\r\n  | \"org:job_listings:delete\"\r\n  | \"org:job_listings:change_status\"\r\n  | \"org:job_listing_applications:change_rating\"\r\n  | \"org:job_listing_applications:change_stage\"\r\n\r\nexport async function hasOrgUserPermission(permission: UserPermission) {\r\n  const { has } = await auth()\r\n  return has({ permission })\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAUO,eAAe,qBAAqB,UAA0B;IACnE,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD;IACzB,OAAO,IAAI;QAAE;IAAW;AAC1B","debugId":null}},
    {"offset": {"line": 1212, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/lib/utils.ts"],"sourcesContent":["import { JobListingStatus } from \"@/drizzle/schema\"\r\n\r\nexport function getNextJobListingStatus(status: JobListingStatus) {\r\n  switch (status) {\r\n    case \"draft\":\r\n    case \"delisted\":\r\n      return \"published\"\r\n    case \"published\":\r\n      return \"delisted\"\r\n    default:\r\n      throw new Error(`Unknown job listing status: ${status satisfies never}`)\r\n  }\r\n}\r\n\r\nexport function sortJobListingsByStatus(\r\n  a: JobListingStatus,\r\n  b: JobListingStatus\r\n) {\r\n  return JOB_LISTING_STATUS_SORT_ORDER[a] - JOB_LISTING_STATUS_SORT_ORDER[b]\r\n}\r\n\r\nconst JOB_LISTING_STATUS_SORT_ORDER: Record<JobListingStatus, number> = {\r\n  published: 0,\r\n  draft: 1,\r\n  delisted: 2,\r\n}\r\n"],"names":[],"mappings":";;;;AAEO,SAAS,wBAAwB,MAAwB;IAC9D,OAAQ;QACN,KAAK;QACL,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,QAAwB;IAC3E;AACF;AAEO,SAAS,wBACd,CAAmB,EACnB,CAAmB;IAEnB,OAAO,6BAA6B,CAAC,EAAE,GAAG,6BAA6B,CAAC,EAAE;AAC5E;AAEA,MAAM,gCAAkE;IACtE,WAAW;IACX,OAAO;IACP,UAAU;AACZ","debugId":null}},
    {"offset": {"line": 1244, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/clerk/lib/planFeatures.ts"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\"\r\n\r\ntype PlanFeature =\r\n  | \"post_1_job_listing\"\r\n  | \"post_3_job_listings\"\r\n  | \"post_15_job_listings\"\r\n  | \"unlimited_featured_jobs_listings\"\r\n  | \"1_featured_job_listing\"\r\n\r\nexport async function hasPlanFeature(feature: PlanFeature) {\r\n  const { has } = await auth()\r\n  return has({ feature })\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AASO,eAAe,eAAe,OAAoB;IACvD,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD;IACzB,OAAO,IAAI;QAAE;IAAQ;AACvB","debugId":null}},
    {"offset": {"line": 1264, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/lib/planfeatureHelpers.ts"],"sourcesContent":["import { getCurrentOrganization } from \"@/services/clerk/lib/getCurrentAuth\"\r\nimport { getJobListingOrganizationTag } from \"../db/cache/jobListings\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\nimport { db } from \"@/drizzle/db\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport { and, count, eq } from \"drizzle-orm\"\r\nimport { hasPlanFeature } from \"@/services/clerk/lib/planFeatures\"\r\n\r\nexport async function hasReachedMaxPublishedJobListings() {\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return true\r\n\r\n  const count = await getPublishedJobListingsCount(orgId)\r\n\r\n  const canPost = await Promise.all([\r\n    hasPlanFeature(\"post_1_job_listing\").then(has => has && count < 1),\r\n    hasPlanFeature(\"post_3_job_listings\").then(has => has && count < 3),\r\n    hasPlanFeature(\"post_15_job_listings\").then(has => has && count < 15),\r\n  ])\r\n\r\n  return !canPost.some(Boolean)\r\n}\r\n\r\nexport async function hasReachedMaxFeaturedJobListings() {\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return true\r\n\r\n  const count = await getFeaturedJobListingsCount(orgId)\r\n\r\n  const canFeature = await Promise.all([\r\n    hasPlanFeature(\"1_featured_job_listing\").then(has => has && count < 1),\r\n    hasPlanFeature(\"unlimited_featured_jobs_listings\"),\r\n  ])\r\n\r\n  return !canFeature.some(Boolean)\r\n}\r\n\r\nasync function getPublishedJobListingsCount(orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingOrganizationTag(orgId))\r\n\r\n  const [res] = await db\r\n    .select({ count: count() })\r\n    .from(JobListingTable)\r\n    .where(\r\n      and(\r\n        eq(JobListingTable.organizationId, orgId),\r\n        eq(JobListingTable.status, \"published\")\r\n      )\r\n    )\r\n  return res?.count ?? 0\r\n}\r\n\r\nasync function getFeaturedJobListingsCount(orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingOrganizationTag(orgId))\r\n\r\n  const [res] = await db\r\n    .select({ count: count() })\r\n    .from(JobListingTable)\r\n    .where(\r\n      and(\r\n        eq(JobListingTable.organizationId, orgId),\r\n        eq(JobListingTable.isFeatured, true)\r\n      )\r\n    )\r\n  return res?.count ?? 0\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,oJAAA,CAAA,yBAAsB,AAAD;IAC7C,IAAI,SAAS,MAAM,OAAO;IAE1B,MAAM,QAAQ,MAAM,6BAA6B;IAEjD,MAAM,UAAU,MAAM,QAAQ,GAAG,CAAC;QAChC,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD,EAAE,sBAAsB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QAChE,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD,EAAE,uBAAuB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QACjE,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD,EAAE,wBAAwB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;KACnE;IAED,OAAO,CAAC,QAAQ,IAAI,CAAC;AACvB;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,oJAAA,CAAA,yBAAsB,AAAD;IAC7C,IAAI,SAAS,MAAM,OAAO;IAE1B,MAAM,QAAQ,MAAM,4BAA4B;IAEhD,MAAM,aAAa,MAAM,QAAQ,GAAG,CAAC;QACnC,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD,EAAE,0BAA0B,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QACpE,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD,EAAE;KAChB;IAED,OAAO,CAAC,WAAW,IAAI,CAAC;AAC1B;AAEA,eAAe,6BAA6B,KAAa;IACvD;IACA,CAAA,GAAA,yKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,+JAAA,CAAA,+BAA4B,AAAD,EAAE;IAEtC,MAAM,CAAC,IAAI,GAAG,MAAM,uHAAA,CAAA,KAAE,CACnB,MAAM,CAAC;QAAE,OAAO,CAAA,GAAA,kKAAA,CAAA,QAAK,AAAD;IAAI,GACxB,IAAI,CAAC,yIAAA,CAAA,kBAAe,EACpB,KAAK,CACJ,CAAA,GAAA,qKAAA,CAAA,MAAG,AAAD,EACA,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,cAAc,EAAE,QACnC,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,MAAM,EAAE;IAGjC,OAAO,KAAK,SAAS;AACvB;AAEA,eAAe,4BAA4B,KAAa;IACtD;IACA,CAAA,GAAA,yKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,+JAAA,CAAA,+BAA4B,AAAD,EAAE;IAEtC,MAAM,CAAC,IAAI,GAAG,MAAM,uHAAA,CAAA,KAAE,CACnB,MAAM,CAAC;QAAE,OAAO,CAAA,GAAA,kKAAA,CAAA,QAAK,AAAD;IAAI,GACxB,IAAI,CAAC,yIAAA,CAAA,kBAAe,EACpB,KAAK,CACJ,CAAA,GAAA,qKAAA,CAAA,MAAG,AAAD,EACA,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,cAAc,EAAE,QACnC,CAAA,GAAA,qKAAA,CAAA,KAAE,AAAD,EAAE,yIAAA,CAAA,kBAAe,CAAC,UAAU,EAAE;IAGrC,OAAO,KAAK,SAAS;AACvB","debugId":null}},
    {"offset": {"line": 1330, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/inngest/ai/getLastOutputMessage.ts"],"sourcesContent":["import { AgentResult } from \"@inngest/agent-kit\"\r\n\r\nexport function getLastOutputMessage(result: AgentResult) {\r\n  console.log(\"Processing agent result:\", JSON.stringify(result, null, 2));\r\n  \r\n  const lastMessage = result.output.at(-1)\r\n  if (lastMessage == null) {\r\n    console.log(\"No last message found in output\");\r\n    return;\r\n  }\r\n  \r\n  console.log(\"Last message type:\", lastMessage.type);\r\n  \r\n  if (lastMessage.type !== \"text\") {\r\n    console.log(\"Last message is not text type\");\r\n    return;\r\n  }\r\n  \r\n  // Handle different content formats\r\n  if (typeof lastMessage.content === \"string\") {\r\n    const content = lastMessage.content.trim();\r\n    console.log(\"String content:\", content);\r\n    return content;\r\n  } else if (Array.isArray(lastMessage.content)) {\r\n    const content = lastMessage.content.join(\"\\n\").trim();\r\n    console.log(\"Array content joined:\", content);\r\n    return content;\r\n  } else {\r\n    console.log(\"Unexpected content format:\", lastMessage.content);\r\n    return;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,qBAAqB,MAAmB;IACtD,QAAQ,GAAG,CAAC,4BAA4B,KAAK,SAAS,CAAC,QAAQ,MAAM;IAErE,MAAM,cAAc,OAAO,MAAM,CAAC,EAAE,CAAC,CAAC;IACtC,IAAI,eAAe,MAAM;QACvB,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,QAAQ,GAAG,CAAC,sBAAsB,YAAY,IAAI;IAElD,IAAI,YAAY,IAAI,KAAK,QAAQ;QAC/B,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,mCAAmC;IACnC,IAAI,OAAO,YAAY,OAAO,KAAK,UAAU;QAC3C,MAAM,UAAU,YAAY,OAAO,CAAC,IAAI;QACxC,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,OAAO;IACT,OAAO,IAAI,MAAM,OAAO,CAAC,YAAY,OAAO,GAAG;QAC7C,MAAM,UAAU,YAAY,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI;QACnD,QAAQ,GAAG,CAAC,yBAAyB;QACrC,OAAO;IACT,OAAO;QACL,QAAQ,GAAG,CAAC,8BAA8B,YAAY,OAAO;QAC7D;IACF;AACF","debugId":null}},
    {"offset": {"line": 1368, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/inngest/ai/getMatchingJobListings.ts"],"sourcesContent":["import { env } from \"@/data/env/server\"\r\nimport {\r\n  experienceLevels,\r\n  jobListingTypes,\r\n  locationRequirements,\r\n  wageIntervals,\r\n} from \"@/drizzle/schema\"\r\nimport { createAgent, anthropic } from \"@inngest/agent-kit\"\r\nimport { z } from \"zod\"\r\nimport { getLastOutputMessage } from \"./getLastOutputMessage\"\r\n\r\nconst listingSchema = z.object({\r\n  id: z.string(),\r\n  title: z.string(),\r\n  description: z.string(),\r\n  wage: z.number().nullable(),\r\n  wageInterval: z.enum(wageIntervals).nullable(),\r\n  stateAbbreviation: z.string().nullable(),\r\n  city: z.string().nullable(),\r\n  experienceLevel: z.enum(experienceLevels),\r\n  type: z.enum(jobListingTypes),\r\n  locationRequirement: z.enum(locationRequirements),\r\n})\r\n\r\nexport async function getMatchingJobListings(\r\n  prompt: string,\r\n  jobListings: z.infer<typeof listingSchema>[],\r\n  { maxNumberOfJobs }: { maxNumberOfJobs?: number } = {}\r\n) {\r\n  const NO_JOBS = \"NO_JOBS\"\r\n\r\n  // Debug: Log the number of job listings received\r\n  console.log(`Received ${jobListings.length} job listings for matching`);\r\n  \r\n  // Debug: Log a sample of job listings if available\r\n  if (jobListings.length > 0) {\r\n    console.log(`Sample job: ${JSON.stringify(jobListings[0])}`);\r\n  }\r\n\r\n  const agent = createAgent({\r\n    name: \"Job Matching Agent\",\r\n    description: \"Agent for matching users with job listings\",\r\n    system: `You are an expert at matching people with jobs based on their specific experience, and requirements. The provided user prompt will be a description that can include information about themselves as well what they are looking for in a job. ${\r\n      maxNumberOfJobs\r\n        ? `You are to return up to ${maxNumberOfJobs} jobs.`\r\n        : `Return all jobs that match their requirements.`\r\n    } Return the jobs as a comma separated list of jobIds. If you cannot find any jobs that match the user prompt, return the text \"${NO_JOBS}\". Here is the JSON array of available job listings: ${JSON.stringify(\r\n      jobListings.map(listing =>\r\n        listingSchema\r\n          .transform(listing => ({\r\n            ...listing,\r\n            wage: listing.wage ?? undefined,\r\n            wageInterval: listing.wageInterval ?? undefined,\r\n            city: listing.city ?? undefined,\r\n            stateAbbreviation: listing.stateAbbreviation ?? undefined,\r\n            locationRequirement: listing.locationRequirement ?? undefined,\r\n          }))\r\n          .parse(listing)\r\n      )\r\n    )}`,\r\n    model: anthropic({\r\n      model: \"claude-3-5-haiku-latest\",\r\n      apiKey: env.ANTHROPIC_API_KEY,\r\n      defaultParameters: {\r\n        max_tokens: 1000,\r\n      },\r\n    }),\r\n  })\r\n  const result = await agent.run(prompt)\r\n  const lastMessage = getLastOutputMessage(result)\r\n\r\n  if (lastMessage == null || lastMessage === NO_JOBS) return []\r\n  return lastMessage\r\n    .split(\",\")\r\n    .map(jobId => jobId.trim())\r\n    .filter(Boolean)\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAMA;AAAA;AAAA;AACA;AAAA;AACA;;;;;;AAEA,MAAM,gBAAgB,oLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7B,IAAI,oLAAA,CAAA,IAAC,CAAC,MAAM;IACZ,OAAO,oLAAA,CAAA,IAAC,CAAC,MAAM;IACf,aAAa,oLAAA,CAAA,IAAC,CAAC,MAAM;IACrB,MAAM,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,cAAc,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,gBAAa,EAAE,QAAQ;IAC5C,mBAAmB,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACtC,MAAM,oLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,iBAAiB,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,mBAAgB;IACxC,MAAM,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,kBAAe;IAC5B,qBAAqB,oLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,yIAAA,CAAA,uBAAoB;AAClD;AAEO,eAAe,uBACpB,MAAc,EACd,WAA4C,EAC5C,EAAE,eAAe,EAAgC,GAAG,CAAC,CAAC;IAEtD,MAAM,UAAU;IAEhB,iDAAiD;IACjD,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,YAAY,MAAM,CAAC,0BAA0B,CAAC;IAEtE,mDAAmD;IACnD,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,KAAK,SAAS,CAAC,WAAW,CAAC,EAAE,GAAG;IAC7D;IAEA,MAAM,QAAQ,CAAA,GAAA,yKAAA,CAAA,cAAW,AAAD,EAAE;QACxB,MAAM;QACN,aAAa;QACb,QAAQ,CAAC,8OAA8O,EACrP,kBACI,CAAC,wBAAwB,EAAE,gBAAgB,MAAM,CAAC,GAClD,CAAC,8CAA8C,CAAC,CACrD,+HAA+H,EAAE,QAAQ,qDAAqD,EAAE,KAAK,SAAS,CAC7M,YAAY,GAAG,CAAC,CAAA,UACd,cACG,SAAS,CAAC,CAAA,UAAW,CAAC;oBACrB,GAAG,OAAO;oBACV,MAAM,QAAQ,IAAI,IAAI;oBACtB,cAAc,QAAQ,YAAY,IAAI;oBACtC,MAAM,QAAQ,IAAI,IAAI;oBACtB,mBAAmB,QAAQ,iBAAiB,IAAI;oBAChD,qBAAqB,QAAQ,mBAAmB,IAAI;gBACtD,CAAC,GACA,KAAK,CAAC,YAEV;QACH,OAAO,CAAA,GAAA,gMAAA,CAAA,YAAS,AAAD,EAAE;YACf,OAAO;YACP,QAAQ,+HAAA,CAAA,MAAG,CAAC,iBAAiB;YAC7B,mBAAmB;gBACjB,YAAY;YACd;QACF;IACF;IACA,MAAM,SAAS,MAAM,MAAM,GAAG,CAAC;IAC/B,MAAM,cAAc,CAAA,GAAA,2JAAA,CAAA,uBAAoB,AAAD,EAAE;IAEzC,IAAI,eAAe,QAAQ,gBAAgB,SAAS,OAAO,EAAE;IAC7D,OAAO,YACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,QAAS,MAAM,IAAI,IACvB,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 1438, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/actions/actions.ts"],"sourcesContent":["\"use clinet\"\r\n\r\nimport { z } from \"zod\"\r\nimport { jobListingAiSearchSchema, jobListingSchema } from \"./schemas\"\r\nimport {\r\n  getCurrentOrganization,\r\n  getCurrentUser,\r\n} from \"@/services/clerk/lib/getCurrentAuth\"\r\nimport { redirect } from \"next/navigation\"\r\nimport {\r\n  insertJobListing,\r\n  updateJobListing as updateJobListingDb,\r\n  deleteJobListing as deleteJobListingDb,\r\n} from \"../db/jobListings\"\r\nimport { db } from \"@/drizzle/db\"\r\nimport { and, eq } from \"drizzle-orm\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport {\r\n  getJobListingGlobalTag,\r\n  getJobListingIdTag,\r\n} from \"../db/cache/jobListings\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\nimport { hasOrgUserPermission } from \"@/services/clerk/lib/orgUserPermissions\"\r\nimport { getNextJobListingStatus } from \"../lib/utils\"\r\nimport {\r\n  hasReachedMaxFeaturedJobListings,\r\n  hasReachedMaxPublishedJobListings,\r\n} from \"../lib/planfeatureHelpers\"\r\nimport { getMatchingJobListings } from \"@/services/inngest/ai/getMatchingJobListings\"\r\n\r\nexport async function createJobListing(\r\n  unsafeData: z.infer<typeof jobListingSchema>\r\n) {\r\n  const { orgId } = await getCurrentOrganization()\r\n\r\n  if (\r\n    orgId == null ||\r\n    !(await hasOrgUserPermission(\"org:job_listings:create\"))\r\n  ) {\r\n    return {\r\n      error: true,\r\n      message: \"You don't have permission to create a job listing\",\r\n    }\r\n  }\r\n\r\n  const { success, data } = jobListingSchema.safeParse(unsafeData)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error creating your job listing\",\r\n    }\r\n  }\r\n\r\n  const jobListing = await insertJobListing({\r\n    ...data,\r\n    organizationId: orgId,\r\n    status: \"draft\",\r\n  })\r\n\r\n  redirect(`/employer/job-listings/${jobListing.id}`)\r\n}\r\n\r\nexport async function updateJobListing(\r\n  id: string,\r\n  unsafeData: z.infer<typeof jobListingSchema>\r\n) {\r\n  const { orgId } = await getCurrentOrganization()\r\n\r\n  if (\r\n    orgId == null ||\r\n    !(await hasOrgUserPermission(\"org:job_listings:update\"))\r\n  ) {\r\n    return {\r\n      error: true,\r\n      message: \"You don't have permission to update this job listing\",\r\n    }\r\n  }\r\n\r\n  const { success, data } = jobListingSchema.safeParse(unsafeData)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error updating your job listing\",\r\n    }\r\n  }\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error updating your job listing\",\r\n    }\r\n  }\r\n\r\n  const updatedJobListing = await updateJobListingDb(id, data)\r\n\r\n  redirect(`/employer/job-listings/${updatedJobListing.id}`)\r\n}\r\n\r\nexport async function toggleJobListingStatus(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message: \"You don't have permission to update this job listing's status\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  const newStatus = getNextJobListingStatus(jobListing.status)\r\n  if (\r\n    !(await hasOrgUserPermission(\"org:job_listings:change_status\")) ||\r\n    (newStatus === \"published\" && (await hasReachedMaxPublishedJobListings()))\r\n  ) {\r\n    return error\r\n  }\r\n\r\n  await updateJobListingDb(id, {\r\n    status: newStatus,\r\n    isFeatured: newStatus === \"published\" ? undefined : false,\r\n    postedAt:\r\n      newStatus === \"published\" && jobListing.postedAt == null\r\n        ? new Date()\r\n        : undefined,\r\n  })\r\n\r\n  return { error: false }\r\n}\r\n\r\nexport async function toggleJobListingFeatured(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message:\r\n      \"You don't have permission to update this job listing's featured status\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  const newFeaturedStatus = !jobListing.isFeatured\r\n  if (\r\n    !(await hasOrgUserPermission(\"org:job_listings:change_status\")) ||\r\n    (newFeaturedStatus && (await hasReachedMaxFeaturedJobListings()))\r\n  ) {\r\n    return error\r\n  }\r\n\r\n  await updateJobListingDb(id, {\r\n    isFeatured: newFeaturedStatus,\r\n  })\r\n\r\n  return { error: false }\r\n}\r\n\r\nexport async function deleteJobListing(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message: \"You don't have permission to delete this job listing\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  if (!(await hasOrgUserPermission(\"org:job_listings:delete\"))) {\r\n    return error\r\n  }\r\n\r\n  await deleteJobListingDb(id)\r\n\r\n  redirect(\"/employer\")\r\n}\r\n\r\nexport async function getAiJobListingSearchResults(\r\n  unsafe: z.infer<typeof jobListingAiSearchSchema>\r\n): Promise<\r\n  { error: true; message: string } | { error: false; jobIds: string[] }\r\n> {\r\n  const { success, data } = jobListingAiSearchSchema.safeParse(unsafe)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error processing your search query\",\r\n    }\r\n  }\r\n\r\n  const { userId } = await getCurrentUser()\r\n  if (userId == null) {\r\n    return {\r\n      error: true,\r\n      message: \"You need an account to use AI job search\",\r\n    }\r\n  }\r\n\r\n  const allListings = await getPublicJobListings()\r\n  \r\n  // Debug: Log the number of public job listings\r\n  console.log(`Found ${allListings.length} published job listings`);\r\n  \r\n  // If no published job listings exist, return early\r\n  if (allListings.length === 0) {\r\n    return {\r\n      error: true,\r\n      message: \"No published job listings found in the system\",\r\n    }\r\n  }\r\n  \r\n  const matchedListings = await getMatchingJobListings(\r\n    data.query,\r\n    allListings,\r\n    {\r\n      maxNumberOfJobs: 10,\r\n    }\r\n  )\r\n\r\n  if (matchedListings.length === 0) {\r\n    return {\r\n      error: true,\r\n      message: \"No jobs match your search criteria\",\r\n    }\r\n  }\r\n\r\n  return { error: false, jobIds: matchedListings }\r\n}\r\n\r\nasync function getJobListing(id: string, orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingIdTag(id))\r\n\r\n  return db.query.JobListingTable.findFirst({\r\n    where: and(\r\n      eq(JobListingTable.id, id),\r\n      eq(JobListingTable.organizationId, orgId)\r\n    ),\r\n  })\r\n}\r\n\r\nasync function getPublicJobListings() {\r\n  \"use cache\"\r\n  cacheTag(getJobListingGlobalTag())\r\n\r\n  return db.query.JobListingTable.findMany({\r\n    where: eq(JobListingTable.status, \"published\"),\r\n  })\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1640, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/components/JobListingAiSearchForm.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { jobListingAiSearchSchema } from \"../actions/schemas\"\r\nimport { z } from \"zod\"\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormDescription,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { LoadingSwap } from \"@/components/LoadingSwap\"\r\nimport { getAiJobListingSearchResults } from \"../actions/actions\"\r\nimport { toast } from \"sonner\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nexport function JobListingAiSearchForm() {\r\n  const router = useRouter()\r\n  const form = useForm({\r\n    resolver: zodResolver(jobListingAiSearchSchema),\r\n    defaultValues: { query: \"\" },\r\n  })\r\n\r\n  async function onSubmit(data: z.infer<typeof jobListingAiSearchSchema>) {\r\n    const results = await getAiJobListingSearchResults(data)\r\n    if (results.error) {\r\n      toast.error(results.message)\r\n      return\r\n    }\r\n\r\n    const params = new URLSearchParams()\r\n    results.jobIds.forEach(id => params.append(\"jobIds\", id))\r\n    router.push(`/?${params.toString()}`)\r\n  }\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n        <FormField\r\n          name=\"query\"\r\n          control={form.control}\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>Query</FormLabel>\r\n              <FormControl>\r\n                <Textarea {...field} className=\"min-h-32\" />\r\n              </FormControl>\r\n              <FormDescription>\r\n                Provide a description of your skills/experience as well as what\r\n                you are looking for in a job. The more specific you are, the\r\n                better the results will be.\r\n              </FormDescription>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n        <Button\r\n          disabled={form.formState.isSubmitting}\r\n          type=\"submit\"\r\n          className=\"w-full\"\r\n        >\r\n          <LoadingSwap isLoading={form.formState.isSubmitting}>\r\n            Search\r\n          </LoadingSwap>\r\n        </Button>\r\n      </form>\r\n    </Form>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AASA;AACA;AACA;AACA;AACA;AACA;;;AApBA;;;;;;;;;;;AAsBO,SAAS;;IACd,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,OAAO,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;QACnB,UAAU,CAAA,GAAA,iKAAA,CAAA,cAAW,AAAD,EAAE,uJAAA,CAAA,2BAAwB;QAC9C,eAAe;YAAE,OAAO;QAAG;IAC7B;IAEA,eAAe,SAAS,IAA8C;QACpE,MAAM,UAAU,MAAM,CAAA,GAAA,uJAAA,CAAA,+BAA4B,AAAD,EAAE;QACnD,IAAI,QAAQ,KAAK,EAAE;YACjB,2IAAA,CAAA,QAAK,CAAC,KAAK,CAAC,QAAQ,OAAO;YAC3B;QACF;QAEA,MAAM,SAAS,IAAI;QACnB,QAAQ,MAAM,CAAC,OAAO,CAAC,CAAA,KAAM,OAAO,MAAM,CAAC,UAAU;QACrD,OAAO,IAAI,CAAC,CAAC,EAAE,EAAE,OAAO,QAAQ,IAAI;IACtC;IAEA,qBACE,6MAAC,mIAAA,CAAA,OAAI;QAAE,GAAG,IAAI;kBACZ,cAAA,6MAAC;YAAK,UAAU,KAAK,YAAY,CAAC;YAAW,WAAU;;8BACrD,6MAAC,mIAAA,CAAA,YAAS;oBACR,MAAK;oBACL,SAAS,KAAK,OAAO;oBACrB,QAAQ,CAAC,EAAE,KAAK,EAAE,iBAChB,6MAAC,mIAAA,CAAA,WAAQ;;8CACP,6MAAC,mIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,6MAAC,mIAAA,CAAA,cAAW;8CACV,cAAA,6MAAC,uIAAA,CAAA,WAAQ;wCAAE,GAAG,KAAK;wCAAE,WAAU;;;;;;;;;;;8CAEjC,6MAAC,mIAAA,CAAA,kBAAe;8CAAC;;;;;;8CAKjB,6MAAC,mIAAA,CAAA,cAAW;;;;;;;;;;;;;;;;8BAIlB,6MAAC,qIAAA,CAAA,SAAM;oBACL,UAAU,KAAK,SAAS,CAAC,YAAY;oBACrC,MAAK;oBACL,WAAU;8BAEV,cAAA,6MAAC,oIAAA,CAAA,cAAW;wBAAC,WAAW,KAAK,SAAS,CAAC,YAAY;kCAAE;;;;;;;;;;;;;;;;;;;;;;AAO/D;GApDgB;;QACC,qIAAA,CAAA,YAAS;QACX,iKAAA,CAAA,UAAO;;;KAFN","debugId":null}}]
}