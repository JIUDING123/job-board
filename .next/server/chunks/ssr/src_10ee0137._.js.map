{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/components/JobListingForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const JobListingForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call JobListingForm() from the server but JobListingForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/jobListings/components/JobListingForm.tsx <module evaluation>\",\n    \"JobListingForm\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,wFACA","debugId":null}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/components/JobListingForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const JobListingForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call JobListingForm() from the server but JobListingForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/features/jobListings/components/JobListingForm.tsx\",\n    \"JobListingForm\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,iBAAiB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAChD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,oEACA","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/app/employer/job-listings/%5BjobListingId%5D/edit/page.tsx"],"sourcesContent":["import { Card, CardContent } from \"@/components/ui/card\"\r\nimport { db } from \"@/drizzle/db\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport { JobListingForm } from \"@/features/jobListings/components/JobListingForm\"\r\nimport { getJobListingIdTag } from \"@/features/jobListings/db/cache/jobListings\"\r\nimport { getCurrentOrganization } from \"@/services/clerk/lib/getCurrentAuth\"\r\nimport { and, eq } from \"drizzle-orm\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\nimport { notFound } from \"next/navigation\"\r\nimport { Suspense } from \"react\"\r\n\r\ntype Props = {\r\n  params: Promise<{ jobListingId: string }>\r\n}\r\n\r\nexport default function EditJobListingPage(props: Props) {\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-2\">Edit Job Listing</h1>\r\n      <Card>\r\n        <CardContent>\r\n          <Suspense>\r\n            <SuspendedPage {...props} />\r\n          </Suspense>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function SuspendedPage({ params }: Props) {\r\n  const { jobListingId } = await params\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return notFound()\r\n\r\n  const jobListing = await getJobListing(jobListingId, orgId)\r\n  if (jobListing == null) return notFound()\r\n\r\n  return <JobListingForm jobListing={jobListing} />\r\n}\r\n\r\nasync function getJobListing(id: string, orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingIdTag(id))\r\n\r\n  return db.query.JobListingTable.findFirst({\r\n    where: and(\r\n      eq(JobListingTable.id, id),\r\n      eq(JobListingTable.organizationId, orgId)\r\n    ),\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;AAMe,SAAS,mBAAmB,KAAY;IACrD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,8OAAC,gIAAA,CAAA,OAAI;0BACH,cAAA,8OAAC,gIAAA,CAAA,cAAW;8BACV,cAAA,8OAAC,qMAAA,CAAA,WAAQ;kCACP,cAAA,8OAAC;4BAAe,GAAG,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC;AAEA,eAAe,cAAc,EAAE,MAAM,EAAS;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM;IAC/B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,iJAAA,CAAA,yBAAsB,AAAD;IAC7C,IAAI,SAAS,MAAM,OAAO,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IAEjC,MAAM,aAAa,MAAM,cAAc,cAAc;IACrD,IAAI,cAAc,MAAM,OAAO,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IAEtC,qBAAO,8OAAC,+JAAA,CAAA,iBAAc;QAAC,YAAY;;;;;;AACrC;IAEA,6SAAA,eAAe,cAAc,EAAU,EAAE,KAAa;IAEpD,CAAA,GAAA,sKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,4JAAA,CAAA,qBAAkB,AAAD,EAAE;IAE5B,OAAO,oHAAA,CAAA,KAAE,CAAC,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC;QACxC,OAAO,CAAA,GAAA,kKAAA,CAAA,MAAG,AAAD,EACP,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE,KACvB,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,cAAc,EAAE;IAEvC;AACF;;;;;IAVe,gBAAf","debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/actions/schemas.ts"],"sourcesContent":["import {\r\n  experienceLevels,\r\n  jobListingTypes,\r\n  locationRequirements,\r\n  wageIntervals,\r\n} from \"@/drizzle/schema\"\r\nimport { z } from \"zod\"\r\n\r\nexport const jobListingSchema = z\r\n  .object({\r\n    title: z.string().min(1, \"Required\"),\r\n    description: z.string().min(1, \"Required\"),\r\n    experienceLevel: z.enum(experienceLevels),\r\n    locationRequirement: z.enum(locationRequirements),\r\n    type: z.enum(jobListingTypes),\r\n    wage: z.number().int().positive().min(1).nullable(),\r\n    wageInterval: z.enum(wageIntervals).nullable(),\r\n    stateAbbreviation: z\r\n      .string()\r\n      .transform(val => (val.trim() === \"\" ? null : val))\r\n      .nullable(),\r\n    city: z\r\n      .string()\r\n      .transform(val => (val.trim() === \"\" ? null : val))\r\n      .nullable(),\r\n  })\r\n  .refine(\r\n    listing => {\r\n      return listing.locationRequirement === \"remote\" || listing.city != null\r\n    },\r\n    {\r\n      message: \"Required for non-remote listings\",\r\n      path: [\"city\"],\r\n    }\r\n  )\r\n  .refine(\r\n    listing => {\r\n      return (\r\n        listing.locationRequirement === \"remote\" ||\r\n        listing.stateAbbreviation != null\r\n      )\r\n    },\r\n    {\r\n      message: \"Required for non-remote listings\",\r\n      path: [\"stateAbbreviation\"],\r\n    }\r\n  )\r\n\r\nexport const jobListingAiSearchSchema = z.object({\r\n  query: z.string().min(1, \"Required\"),\r\n})\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAMA;AAAA;;;AAEO,MAAM,mBAAmB,iLAAA,CAAA,IAAC,CAC9B,MAAM,CAAC;IACN,OAAO,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,aAAa,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC/B,iBAAiB,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,mBAAgB;IACxC,qBAAqB,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,uBAAoB;IAChD,MAAM,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,kBAAe;IAC5B,MAAM,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,GAAG,GAAG,CAAC,GAAG,QAAQ;IACjD,cAAc,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,gBAAa,EAAE,QAAQ;IAC5C,mBAAmB,iLAAA,CAAA,IAAC,CACjB,MAAM,GACN,SAAS,CAAC,CAAA,MAAQ,IAAI,IAAI,OAAO,KAAK,OAAO,KAC7C,QAAQ;IACX,MAAM,iLAAA,CAAA,IAAC,CACJ,MAAM,GACN,SAAS,CAAC,CAAA,MAAQ,IAAI,IAAI,OAAO,KAAK,OAAO,KAC7C,QAAQ;AACb,GACC,MAAM,CACL,CAAA;IACE,OAAO,QAAQ,mBAAmB,KAAK,YAAY,QAAQ,IAAI,IAAI;AACrE,GACA;IACE,SAAS;IACT,MAAM;QAAC;KAAO;AAChB,GAED,MAAM,CACL,CAAA;IACE,OACE,QAAQ,mBAAmB,KAAK,YAChC,QAAQ,iBAAiB,IAAI;AAEjC,GACA;IACE,SAAS;IACT,MAAM;QAAC;KAAoB;AAC7B;AAGG,MAAM,2BAA2B,iLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/C,OAAO,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC3B","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/db/jobListings.ts"],"sourcesContent":["import { db } from \"@/drizzle/db\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport { revalidateJobListingCache } from \"./cache/jobListings\"\r\nimport { eq } from \"drizzle-orm\"\r\n\r\nexport async function insertJobListing(\r\n  jobListing: typeof JobListingTable.$inferInsert\r\n) {\r\n  const [newListing] = await db\r\n    .insert(JobListingTable)\r\n    .values(jobListing)\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(newListing)\r\n\r\n  return newListing\r\n}\r\n\r\nexport async function updateJobListing(\r\n  id: string,\r\n  jobListing: Partial<typeof JobListingTable.$inferInsert>\r\n) {\r\n  const [updatedListing] = await db\r\n    .update(JobListingTable)\r\n    .set(jobListing)\r\n    .where(eq(JobListingTable.id, id))\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(updatedListing)\r\n\r\n  return updatedListing\r\n}\r\n\r\nexport async function deleteJobListing(id: string) {\r\n  const [deletedJobListing] = await db\r\n    .delete(JobListingTable)\r\n    .where(eq(JobListingTable.id, id))\r\n    .returning({\r\n      id: JobListingTable.id,\r\n      organizationId: JobListingTable.organizationId,\r\n    })\r\n\r\n  revalidateJobListingCache(deletedJobListing)\r\n\r\n  return deletedJobListing\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;AAEO,eAAe,iBACpB,UAA+C;IAE/C,MAAM,CAAC,WAAW,GAAG,MAAM,oHAAA,CAAA,KAAE,CAC1B,MAAM,CAAC,sIAAA,CAAA,kBAAe,EACtB,MAAM,CAAC,YACP,SAAS,CAAC;QACT,IAAI,sIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,sIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,4JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT;AAEO,eAAe,iBACpB,EAAU,EACV,UAAwD;IAExD,MAAM,CAAC,eAAe,GAAG,MAAM,oHAAA,CAAA,KAAE,CAC9B,MAAM,CAAC,sIAAA,CAAA,kBAAe,EACtB,GAAG,CAAC,YACJ,KAAK,CAAC,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE,KAC7B,SAAS,CAAC;QACT,IAAI,sIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,sIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,4JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT;AAEO,eAAe,iBAAiB,EAAU;IAC/C,MAAM,CAAC,kBAAkB,GAAG,MAAM,oHAAA,CAAA,KAAE,CACjC,MAAM,CAAC,sIAAA,CAAA,kBAAe,EACtB,KAAK,CAAC,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,EAAE,EAAE,KAC7B,SAAS,CAAC;QACT,IAAI,sIAAA,CAAA,kBAAe,CAAC,EAAE;QACtB,gBAAgB,sIAAA,CAAA,kBAAe,CAAC,cAAc;IAChD;IAEF,CAAA,GAAA,4JAAA,CAAA,4BAAyB,AAAD,EAAE;IAE1B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/clerk/lib/planFeatures.ts"],"sourcesContent":["import { auth } from \"@clerk/nextjs/server\"\r\n\r\ntype PlanFeature =\r\n  | \"post_1_job_listing\"\r\n  | \"post_3_job_listings\"\r\n  | \"post_15_job_listings\"\r\n  | \"unlimited_featured_jobs_listings\"\r\n  | \"1_featured_job_listing\"\r\n\r\nexport async function hasPlanFeature(feature: PlanFeature) {\r\n  const { has } = await auth()\r\n  return has({ feature })\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AASO,eAAe,eAAe,OAAoB;IACvD,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IACzB,OAAO,IAAI;QAAE;IAAQ;AACvB","debugId":null}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/lib/planfeatureHelpers.ts"],"sourcesContent":["import { getCurrentOrganization } from \"@/services/clerk/lib/getCurrentAuth\"\r\nimport { getJobListingOrganizationTag } from \"../db/cache/jobListings\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\nimport { db } from \"@/drizzle/db\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport { and, count, eq } from \"drizzle-orm\"\r\nimport { hasPlanFeature } from \"@/services/clerk/lib/planFeatures\"\r\n\r\nexport async function hasReachedMaxPublishedJobListings() {\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return true\r\n\r\n  const count = await getPublishedJobListingsCount(orgId)\r\n\r\n  const canPost = await Promise.all([\r\n    hasPlanFeature(\"post_1_job_listing\").then(has => has && count < 1),\r\n    hasPlanFeature(\"post_3_job_listings\").then(has => has && count < 3),\r\n    hasPlanFeature(\"post_15_job_listings\").then(has => has && count < 15),\r\n  ])\r\n\r\n  return !canPost.some(Boolean)\r\n}\r\n\r\nexport async function hasReachedMaxFeaturedJobListings() {\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return true\r\n\r\n  const count = await getFeaturedJobListingsCount(orgId)\r\n\r\n  const canFeature = await Promise.all([\r\n    hasPlanFeature(\"1_featured_job_listing\").then(has => has && count < 1),\r\n    hasPlanFeature(\"unlimited_featured_jobs_listings\"),\r\n  ])\r\n\r\n  return !canFeature.some(Boolean)\r\n}\r\n\r\nasync function getPublishedJobListingsCount(orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingOrganizationTag(orgId))\r\n\r\n  const [res] = await db\r\n    .select({ count: count() })\r\n    .from(JobListingTable)\r\n    .where(\r\n      and(\r\n        eq(JobListingTable.organizationId, orgId),\r\n        eq(JobListingTable.status, \"published\")\r\n      )\r\n    )\r\n  return res?.count ?? 0\r\n}\r\n\r\nasync function getFeaturedJobListingsCount(orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingOrganizationTag(orgId))\r\n\r\n  const [res] = await db\r\n    .select({ count: count() })\r\n    .from(JobListingTable)\r\n    .where(\r\n      and(\r\n        eq(JobListingTable.organizationId, orgId),\r\n        eq(JobListingTable.isFeatured, true)\r\n      )\r\n    )\r\n  return res?.count ?? 0\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;;;;;;;;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,iJAAA,CAAA,yBAAsB,AAAD;IAC7C,IAAI,SAAS,MAAM,OAAO;IAE1B,MAAM,QAAQ,MAAM,6BAA6B;IAEjD,MAAM,UAAU,MAAM,QAAQ,GAAG,CAAC;QAChC,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD,EAAE,sBAAsB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QAChE,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD,EAAE,uBAAuB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QACjE,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD,EAAE,wBAAwB,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;KACnE;IAED,OAAO,CAAC,QAAQ,IAAI,CAAC;AACvB;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,CAAA,GAAA,iJAAA,CAAA,yBAAsB,AAAD;IAC7C,IAAI,SAAS,MAAM,OAAO;IAE1B,MAAM,QAAQ,MAAM,4BAA4B;IAEhD,MAAM,aAAa,MAAM,QAAQ,GAAG,CAAC;QACnC,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD,EAAE,0BAA0B,IAAI,CAAC,CAAA,MAAO,OAAO,QAAQ;QACpE,CAAA,GAAA,+IAAA,CAAA,iBAAc,AAAD,EAAE;KAChB;IAED,OAAO,CAAC,WAAW,IAAI,CAAC;AAC1B;IAEA,6SAAA,eAAe,6BAA6B,KAAa;IAEvD,CAAA,GAAA,sKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,4JAAA,CAAA,+BAA4B,AAAD,EAAE;IAEtC,MAAM,CAAC,IAAI,GAAG,MAAM,oHAAA,CAAA,KAAE,CACnB,MAAM,CAAC;QAAE,OAAO,CAAA,GAAA,+JAAA,CAAA,QAAK,AAAD;IAAI,GACxB,IAAI,CAAC,sIAAA,CAAA,kBAAe,EACpB,KAAK,CACJ,CAAA,GAAA,kKAAA,CAAA,MAAG,AAAD,EACA,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,cAAc,EAAE,QACnC,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,MAAM,EAAE;IAGjC,OAAO,KAAK,SAAS;AACvB;;;;;IAde,+BAAf;IAgBA,6SAAA,eAAe,4BAA4B,KAAa;IAEtD,CAAA,GAAA,sKAAA,CAAA,WAAQ,AAAD,EAAE,CAAA,GAAA,4JAAA,CAAA,+BAA4B,AAAD,EAAE;IAEtC,MAAM,CAAC,IAAI,GAAG,MAAM,oHAAA,CAAA,KAAE,CACnB,MAAM,CAAC;QAAE,OAAO,CAAA,GAAA,+JAAA,CAAA,QAAK,AAAD;IAAI,GACxB,IAAI,CAAC,sIAAA,CAAA,kBAAe,EACpB,KAAK,CACJ,CAAA,GAAA,kKAAA,CAAA,MAAG,AAAD,EACA,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,cAAc,EAAE,QACnC,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,sIAAA,CAAA,kBAAe,CAAC,UAAU,EAAE;IAGrC,OAAO,KAAK,SAAS;AACvB;;;;;IAde,8BAAf","debugId":null}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/inngest/ai/getLastOutputMessage.ts"],"sourcesContent":["import { AgentResult } from \"@inngest/agent-kit\"\r\n\r\nexport function getLastOutputMessage(result: AgentResult) {\r\n  console.log(\"Processing agent result:\", JSON.stringify(result, null, 2));\r\n  \r\n  const lastMessage = result.output.at(-1)\r\n  if (lastMessage == null) {\r\n    console.log(\"No last message found in output\");\r\n    return;\r\n  }\r\n  \r\n  console.log(\"Last message type:\", lastMessage.type);\r\n  \r\n  if (lastMessage.type !== \"text\") {\r\n    console.log(\"Last message is not text type\");\r\n    return;\r\n  }\r\n  \r\n  // Handle different content formats\r\n  if (typeof lastMessage.content === \"string\") {\r\n    const content = lastMessage.content.trim();\r\n    console.log(\"String content:\", content);\r\n    return content;\r\n  } else if (Array.isArray(lastMessage.content)) {\r\n    const content = lastMessage.content.join(\"\\n\").trim();\r\n    console.log(\"Array content joined:\", content);\r\n    return content;\r\n  } else {\r\n    console.log(\"Unexpected content format:\", lastMessage.content);\r\n    return;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAEO,SAAS,qBAAqB,MAAmB;IACtD,QAAQ,GAAG,CAAC,4BAA4B,KAAK,SAAS,CAAC,QAAQ,MAAM;IAErE,MAAM,cAAc,OAAO,MAAM,CAAC,EAAE,CAAC,CAAC;IACtC,IAAI,eAAe,MAAM;QACvB,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,QAAQ,GAAG,CAAC,sBAAsB,YAAY,IAAI;IAElD,IAAI,YAAY,IAAI,KAAK,QAAQ;QAC/B,QAAQ,GAAG,CAAC;QACZ;IACF;IAEA,mCAAmC;IACnC,IAAI,OAAO,YAAY,OAAO,KAAK,UAAU;QAC3C,MAAM,UAAU,YAAY,OAAO,CAAC,IAAI;QACxC,QAAQ,GAAG,CAAC,mBAAmB;QAC/B,OAAO;IACT,OAAO,IAAI,MAAM,OAAO,CAAC,YAAY,OAAO,GAAG;QAC7C,MAAM,UAAU,YAAY,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI;QACnD,QAAQ,GAAG,CAAC,yBAAyB;QACrC,OAAO;IACT,OAAO;QACL,QAAQ,GAAG,CAAC,8BAA8B,YAAY,OAAO;QAC7D;IACF;AACF","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/services/inngest/ai/getMatchingJobListings.ts"],"sourcesContent":["import { env } from \"@/data/env/server\"\r\nimport {\r\n  experienceLevels,\r\n  jobListingTypes,\r\n  locationRequirements,\r\n  wageIntervals,\r\n} from \"@/drizzle/schema\"\r\nimport { createAgent, openai} from \"@inngest/agent-kit\"\r\nimport { z } from \"zod\"\r\nimport { getLastOutputMessage } from \"./getLastOutputMessage\"\r\n\r\nconst listingSchema = z.object({\r\n  id: z.string(),\r\n  title: z.string(),\r\n  description: z.string(),\r\n  wage: z.number().nullable(),\r\n  wageInterval: z.enum(wageIntervals).nullable(),\r\n  stateAbbreviation: z.string().nullable(),\r\n  city: z.string().nullable(),\r\n  experienceLevel: z.enum(experienceLevels),\r\n  type: z.enum(jobListingTypes),\r\n  locationRequirement: z.enum(locationRequirements),\r\n})\r\n\r\n\r\nexport async function getMatchingJobListings(\r\n  prompt: string,\r\n  jobListings: z.infer<typeof listingSchema>[],\r\n  { maxNumberOfJobs }: { maxNumberOfJobs?: number } = {}\r\n) {\r\n  const NO_JOBS = \"NO_JOBS\"\r\n  console.log(\"Gemini API Key Loaded:\", env.GEMINI_API_KEY ? \"Yes\" : \"No\");\r\n  const agent = createAgent({\r\n    name: \"Job Matching Agent\",\r\n    description: \"Agent for matching users with job listings\",\r\n    system: `You are an expert at matching people with jobs based on their specific experience, and requirements. The provided user prompt will be a description that includes information about themselves and their job requirements. ${\r\n      maxNumberOfJobs\r\n        ? `You are to return up to ${maxNumberOfJobs} jobs.`\r\n        : `Return all jobs that match their requirements.`\r\n    } \r\n        \r\n    Return the jobs as a comma separated list of jobIds. If you cannot find any jobs that match the user prompt, return the text \"${NO_JOBS}\". Here is the JSON array of available job listings: ${JSON.stringify(\r\n      jobListings.map(listing =>\r\n        listingSchema\r\n          .transform(listing => ({\r\n            ...listing,\r\n            wage: listing.wage ?? undefined,\r\n            wageInterval: listing.wageInterval ?? undefined,\r\n            city: listing.city ?? undefined,\r\n            stateAbbreviation: listing.stateAbbreviation ?? undefined,\r\n            locationRequirement: listing.locationRequirement ?? undefined,\r\n          }))\r\n          .parse(listing)\r\n      )\r\n    )}`,\r\n    model: openai({\r\n      model: \"qwen-turbo\",\r\n      apiKey: env.QWEN_API_KEY,\r\n      baseUrl: \"https://dashscope.aliyuncs.com/compatible-mode/v1\",\r\n    }),\r\n  })\r\n  const result = await agent.run(prompt)\r\n  const lastMessage = getLastOutputMessage(result)\r\n\r\n  if (lastMessage == null || lastMessage === NO_JOBS) return []\r\n\r\n  return lastMessage\r\n    .split(\",\")\r\n    .map(jobId => jobId.trim())\r\n    .filter(Boolean)\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAMA;AAAA;AAAA;AACA;AAAA;AACA;;;;;;AAEA,MAAM,gBAAgB,iLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7B,IAAI,iLAAA,CAAA,IAAC,CAAC,MAAM;IACZ,OAAO,iLAAA,CAAA,IAAC,CAAC,MAAM;IACf,aAAa,iLAAA,CAAA,IAAC,CAAC,MAAM;IACrB,MAAM,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,cAAc,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,gBAAa,EAAE,QAAQ;IAC5C,mBAAmB,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACtC,MAAM,iLAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACzB,iBAAiB,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,mBAAgB;IACxC,MAAM,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,kBAAe;IAC5B,qBAAqB,iLAAA,CAAA,IAAC,CAAC,IAAI,CAAC,sIAAA,CAAA,uBAAoB;AAClD;AAGO,eAAe,uBACpB,MAAc,EACd,WAA4C,EAC5C,EAAE,eAAe,EAAgC,GAAG,CAAC,CAAC;IAEtD,MAAM,UAAU;IAChB,QAAQ,GAAG,CAAC,0BAA0B,4HAAA,CAAA,MAAG,CAAC,cAAc,GAAG,QAAQ;IACnE,MAAM,QAAQ,CAAA,GAAA,sKAAA,CAAA,cAAW,AAAD,EAAE;QACxB,MAAM;QACN,aAAa;QACb,QAAQ,CAAC,2NAA2N,EAClO,kBACI,CAAC,wBAAwB,EAAE,gBAAgB,MAAM,CAAC,GAClD,CAAC,8CAA8C,CAAC,CACrD;;kIAE6H,EAAE,QAAQ,qDAAqD,EAAE,KAAK,SAAS,CAC3M,YAAY,GAAG,CAAC,CAAA,UACd,cACG,SAAS,CAAC,CAAA,UAAW,CAAC;oBACrB,GAAG,OAAO;oBACV,MAAM,QAAQ,IAAI,IAAI;oBACtB,cAAc,QAAQ,YAAY,IAAI;oBACtC,MAAM,QAAQ,IAAI,IAAI;oBACtB,mBAAmB,QAAQ,iBAAiB,IAAI;oBAChD,qBAAqB,QAAQ,mBAAmB,IAAI;gBACtD,CAAC,GACA,KAAK,CAAC,YAEV;QACH,OAAO,CAAA,GAAA,6LAAA,CAAA,SAAM,AAAD,EAAE;YACZ,OAAO;YACP,QAAQ,4HAAA,CAAA,MAAG,CAAC,YAAY;YACxB,SAAS;QACX;IACF;IACA,MAAM,SAAS,MAAM,MAAM,GAAG,CAAC;IAC/B,MAAM,cAAc,CAAA,GAAA,wJAAA,CAAA,uBAAoB,AAAD,EAAE;IAEzC,IAAI,eAAe,QAAQ,gBAAgB,SAAS,OAAO,EAAE;IAE7D,OAAO,YACJ,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,QAAS,MAAM,IAAI,IACvB,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file:///F:/WebDevSimplified/job-board-ai/src/features/jobListings/actions/actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { z } from \"zod\"\r\nimport { jobListingAiSearchSchema, jobListingSchema } from \"./schemas\"\r\nimport {\r\n  getCurrentOrganization,\r\n  getCurrentUser,\r\n} from \"@/services/clerk/lib/getCurrentAuth\"\r\nimport { redirect } from \"next/navigation\"\r\nimport {\r\n  insertJobListing,\r\n  updateJobListing as updateJobListingDb,\r\n  deleteJobListing as deleteJobListingDb,\r\n} from \"../db/jobListings\"\r\nimport { db } from \"@/drizzle/db\"\r\nimport { and, eq } from \"drizzle-orm\"\r\nimport { JobListingTable } from \"@/drizzle/schema\"\r\nimport {\r\n  getJobListingGlobalTag,\r\n  getJobListingIdTag,\r\n} from \"../db/cache/jobListings\"\r\nimport { cacheTag } from \"next/dist/server/use-cache/cache-tag\"\r\nimport { hasOrgUserPermission } from \"@/services/clerk/lib/orgUserPermissions\"\r\nimport { getNextJobListingStatus } from \"../lib/utils\"\r\nimport {\r\n  hasReachedMaxFeaturedJobListings,\r\n  hasReachedMaxPublishedJobListings,\r\n} from \"../lib/planfeatureHelpers\"\r\nimport { getMatchingJobListings } from \"@/services/inngest/ai/getMatchingJobListings\"\r\n\r\nexport async function createJobListing(\r\n  unsafeData: z.infer<typeof jobListingSchema>\r\n) {\r\n  const { orgId } = await getCurrentOrganization()\r\n\r\n  if (\r\n    orgId == null ||\r\n    !(await hasOrgUserPermission(\"org:job_listings:create\"))\r\n  ) {\r\n    return {\r\n      error: true,\r\n      message: \"You don't have permission to create a job listing\",\r\n    }\r\n  }\r\n\r\n  const { success, data } = jobListingSchema.safeParse(unsafeData)\r\n  console.log(\"data\", data)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error creating your job listing\",\r\n    }\r\n  }\r\n\r\n  const jobListing = await insertJobListing({\r\n    ...data,\r\n    organizationId: orgId,\r\n    status: \"draft\",\r\n  })\r\n\r\n  redirect(`/employer/job-listings/${jobListing.id}`)\r\n}\r\n\r\nexport async function updateJobListing(\r\n  id: string,\r\n  unsafeData: z.infer<typeof jobListingSchema>\r\n) {\r\n  const { orgId } = await getCurrentOrganization()\r\n\r\n  if (\r\n    orgId == null ||\r\n    !(await hasOrgUserPermission(\"org:job_listings:update\"))\r\n  ) {\r\n    return {\r\n      error: true,\r\n      message: \"You don't have permission to update this job listing\",\r\n    }\r\n  }\r\n\r\n  const { success, data } = jobListingSchema.safeParse(unsafeData)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error updating your job listing\",\r\n    }\r\n  }\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error updating your job listing\",\r\n    }\r\n  }\r\n\r\n  const updatedJobListing = await updateJobListingDb(id, data)\r\n\r\n  redirect(`/employer/job-listings/${updatedJobListing.id}`)\r\n}\r\n\r\nexport async function toggleJobListingStatus(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message: \"You don't have permission to update this job listing's status\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  const newStatus = getNextJobListingStatus(jobListing.status)\r\n  if (\r\n    !(await hasOrgUserPermission(\"org:job_listings:change_status\")) ||\r\n    (newStatus === \"published\" && (await hasReachedMaxPublishedJobListings()))\r\n  ) {\r\n    return error\r\n  }\r\n\r\n  await updateJobListingDb(id, {\r\n    status: newStatus,\r\n    isFeatured: newStatus === \"published\" ? undefined : false,\r\n    postedAt:\r\n      newStatus === \"published\" && jobListing.postedAt == null\r\n        ? new Date()\r\n        : undefined,\r\n  })\r\n\r\n  return { error: false }\r\n}\r\n\r\nexport async function toggleJobListingFeatured(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message:\r\n      \"You don't have permission to update this job listing's featured status\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  const newFeaturedStatus = !jobListing.isFeatured\r\n  if (\r\n    !(await hasOrgUserPermission(\"org:job_listings:change_status\")) ||\r\n    (newFeaturedStatus && (await hasReachedMaxFeaturedJobListings()))\r\n  ) {\r\n    return error\r\n  }\r\n\r\n  await updateJobListingDb(id, {\r\n    isFeatured: newFeaturedStatus,\r\n  })\r\n\r\n  return { error: false }\r\n}\r\n\r\nexport async function deleteJobListing(id: string) {\r\n  const error = {\r\n    error: true,\r\n    message: \"You don't have permission to delete this job listing\",\r\n  }\r\n  const { orgId } = await getCurrentOrganization()\r\n  if (orgId == null) return error\r\n\r\n  const jobListing = await getJobListing(id, orgId)\r\n  if (jobListing == null) return error\r\n\r\n  if (!(await hasOrgUserPermission(\"org:job_listings:delete\"))) {\r\n    return error\r\n  }\r\n\r\n  await deleteJobListingDb(id)\r\n\r\n  redirect(\"/employer\")\r\n}\r\n\r\n/* export async function getAiJobListingSearchResults(\r\n  unsafe: z.infer<typeof jobListingAiSearchSchema>\r\n): Promise<\r\n  { error: true; message: string } | { error: false; jobIds: string[] }\r\n> {  \r\n  const { success, data } = jobListingAiSearchSchema.safeParse(unsafe)\r\n  if (!success) {\r\n    return {\r\n      error: true,\r\n      message: \"There was an error processing your search query\",\r\n    }\r\n  }\r\n\r\n  const { userId } = await getCurrentUser()\r\n  if (userId == null) {\r\n    return {\r\n      error: true,\r\n      message: \"You need an account to use AI job search\",\r\n    }\r\n  }\r\n\r\n  const allListings = await getPublicJobListings()\r\n    \r\n  // If no published job listings exist, return early\r\n  if (allListings.length === 0) {\r\n    return {\r\n      error: true,\r\n      message: \"No published job listings found in the system\",\r\n    }\r\n  }\r\n  \r\n  try {\r\n    const matchedListings = await getMatchingJobListings(\r\n      data.query,\r\n      allListings,\r\n      {\r\n        maxNumberOfJobs: 10,\r\n      }\r\n    )\r\n    \r\n\r\n    if ( matchedListings.length === 0) {\r\n      return {\r\n        error: true,\r\n        message: \"No jobs match your search criteria\",\r\n      }\r\n    }\r\n\r\n    return { error: false, jobIds: matchedListings }\r\n  } catch (error) {\r\n    // Provide more detailed error message for debugging\r\n    let errorMessage = \"There was an error processing your search. Please try again.\";\r\n    \r\n    if (error instanceof Error) {\r\n      // In development, show the actual error message\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        errorMessage = `Error: ${error.message}`;\r\n      }\r\n      \r\n      // Log the full error for debugging\r\n      console.error(\"Full error details:\", {\r\n        message: error.message,\r\n        stack: error.stack,\r\n        name: error.name\r\n      });\r\n    }\r\n    \r\n    return {\r\n      error: true,\r\n      message: errorMessage,\r\n    }\r\n  }\r\n} */\r\n\r\n  export async function getAiJobListingSearchResults(\r\n    unsafe: z.infer<typeof jobListingAiSearchSchema>\r\n  ): Promise<\r\n    { error: true; message: string } | { error: false; jobIds: string[] }\r\n  > {\r\n    const { success, data } = jobListingAiSearchSchema.safeParse(unsafe)\r\n    if (!success) {\r\n      return {\r\n        error: true,\r\n        message: \"There was an error processing your search query\",\r\n      }\r\n    }\r\n  \r\n    const { userId } = await getCurrentUser()\r\n    if (userId == null) {\r\n      return {\r\n        error: true,\r\n        message: \"You need an account to use AI job search\",\r\n      }\r\n    }\r\n  \r\n    const allListings = await getPublicJobListings()\r\n    const matchedListings = await getMatchingJobListings(\r\n      data.query,\r\n      allListings,\r\n      {\r\n        maxNumberOfJobs: 10,\r\n      }\r\n    )\r\n    console.log(\"matchedListings\", matchedListings)\r\n    if (matchedListings.length === 0) {\r\n      return {\r\n        error: true,\r\n        message: \"No jobs match your search criteria\",\r\n      }\r\n    }\r\n  \r\n    return { error: false, jobIds: matchedListings }\r\n  }\r\n  \r\nasync function getJobListing(id: string, orgId: string) {\r\n  \"use cache\"\r\n  cacheTag(getJobListingIdTag(id))\r\n\r\n  return db.query.JobListingTable.findFirst({\r\n    where: and(\r\n      eq(JobListingTable.id, id),\r\n      eq(JobListingTable.organizationId, orgId)\r\n    ),\r\n  })\r\n}\r\n\r\nasync function getPublicJobListings() {\r\n  \"use cache\"\r\n  cacheTag(getJobListingGlobalTag())\r\n\r\n  return db.query.JobListingTable.findMany({\r\n    where: eq(JobListingTable.status, \"published\"),\r\n  })\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}